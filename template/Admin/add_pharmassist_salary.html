<!DOCTYPE html>
<html lang="en">
<head>
    <style>
        .nav-link:hover {
            color: red!important; /* Change to your desired text color on hover */
        } 
        .nav-link {
            font-weight: bold !important;
            font-family: 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif;
            font-size: 1.3rem!important;
        }
    </style>
    <meta charset="UTF-8">
    <title>Employee Salary Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
        /* Optional: Add custom styles here */
    </style>
</head>
<body>
    <div class="container mt-4">
        <div class="row justify-content-center">
            <div class="col-md-12">
                <div class="card shadow">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="text-center">Salary - Pharmacist</span>
                            <a href="">View Salaries</a>
                        </div>
                        <form action="" method="POST" id="salaryForm">
                            {% csrf_token %}
                            <div class="mb-3">
                                <div class="col-md-6">
                                    <label for="employeeName" class="form-label">Pharmacist Name</label>
                                    <select class="form-control" id="employeeName" name="username" required>
                                        <option value="" disabled selected>--- Select Pharmacist---</option>
                                        {% for user_profile in user_list %}
                                            <option value="">{{user_profile.name}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            
                            <div class="row g-3">
                                <div class="col-md-3">
                                    <label for="basic" class="form-label text-dark">Basic<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="basic" name="basic" step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="hra" class="form-label text-dark">HRA<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="hra" name="hra"  step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="others" class="form-label text-dark">Others<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="others" name="others"  step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="conv" class="form-label">Conv.<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control text-dark" id="conv" name="conv"  step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="maxEpfWages" class="form-label text-dark">MAX EPF Wages<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="maxEpfWages"  name="maxEpfWages" required value="15000">
                                </div>
                                <div class="col-md-3">
                                    <label for="maxEsiWages" class="form-label text-dark">MAX ESI Wages<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="maxEsiWages"  name="maxEsiWages" required value="21000">
                                </div>
                                <div class="col-md-3">
                                    <label for="lta" class="form-label text-dark">LTA<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="lta" name="lta"  step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="medical" class="form-label text-dark">Medical<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="medical" name="medical"  step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="restAllow" class="form-label text-dark">Rest. Allow<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="restAllow" name="restAllow"  step="0.01" pattern="^\d+(\.\d{1,2})?$" title="Enter a valid decimal number with up to two decimal places" required>
                                </div>
                                <div class="col-md-3">
                                    <label for="grossSalary" class="form-label text-dark">Gross Salary<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="grossSalary" placeholder="0" name="grossSalary" required readonly>
                                </div>
                                <div class="col-md-3">
                                    <label for="netPay" class="form-label text-dark">Net Pay<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="netPay" placeholder="0.0" name="netPay" required readonly>
                                </div>
                                <div class="col-md-3">
                                    <label for="ctc" class="form-label text-dark">CTC<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="ctc" placeholder="0" name="ctc" required readonly>
                                </div>
                                <div class="col-md-3">
                                    <label for="employeeEpf" class="form-label text-dark">Employee EPF<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="employeeEpf" placeholder="0" name="employeeEpf" required readonly>
                                </div>
                                <div class="col-md-3">
                                    <label for="employeeEsi" class="form-label text-dark">Employee ESI<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="employeeEsi" placeholder="0.0" name="employeeEsi" required readonly>
                                </div>
                                <div class="col-md-3">
                                    <label for="employerEpf" class="form-label text-dark">Employer EPF<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="employerEpf" placeholder="0" name="employerEpf" required readonly>
                                </div>
                                <div class="col-md-3">
                                    <label for="employerEsi" class="form-label text-dark">Employer ESI<span class="text-danger">*</span></label>
                                    <input type="number" class="form-control" id="employerEsi" placeholder="0.0" name="employerEsi" required readonly>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary btn-block mt-3">Submit</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for calculations -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        // Function to perform calculations and update read-only fields
        function calculateValues() {
            const basic = parseFloat(document.getElementById('basic').value) || 0;
            const hra = parseFloat(document.getElementById('hra').value) || 0;
            const others = parseFloat(document.getElementById('others').value) || 0;
            const conv = parseFloat(document.getElementById('conv').value) || 0;
            const maxEpfWages = parseFloat(document.getElementById('maxEpfWages').value) || 0;
            const maxEsiWages = parseFloat(document.getElementById('maxEsiWages').value) || 0;
            const lta = parseFloat(document.getElementById('lta').value) || 0;
            const medical = parseFloat(document.getElementById('medical').value) || 0;
            const restAllow = parseFloat(document.getElementById('restAllow').value) || 0;

            const grossSalary = basic + hra + others + conv + lta + medical + restAllow;
            const netPay = grossSalary - (calculateEmployeeEpf() + calculateEmployeeEsi());
            const ctc = grossSalary + calculateEmployerEpf() + calculateEmployerEsi();
            
            document.getElementById('grossSalary').value = grossSalary.toFixed(2);
            document.getElementById('netPay').value = netPay.toFixed(2);
            document.getElementById('ctc').value = ctc.toFixed(2);
            document.getElementById('employeeEpf').value = calculateEmployeeEpf().toFixed(2);
            document.getElementById('employeeEsi').value = calculateEmployeeEsi().toFixed(2);
            document.getElementById('employerEpf').value = calculateEmployerEpf().toFixed(2);
            document.getElementById('employerEsi').value = calculateEmployerEsi().toFixed(2);
        }

        // Function to calculate Employee EPF
        function calculateEmployeeEpf() {
            const basic = parseFloat(document.getElementById('basic').value) || 0;
            const maxEpfWages = parseFloat(document.getElementById('maxEpfWages').value) || 0;
            const employeeEpfPercentage = 5; // Adjust percentage as needed

            return Math.min(basic, maxEpfWages) * (employeeEpfPercentage / 100);
        }

        // Function to calculate Employee ESI
        function calculateEmployeeEsi() {
            const grossSalary = parseFloat(document.getElementById('grossSalary').value) || 0;
            const maxEsiWages = parseFloat(document.getElementById('maxEsiWages').value) || 0;
            const employeeEsiPercentage = 1.75; // Adjust percentage as needed

            return Math.min(grossSalary, maxEsiWages) * (employeeEsiPercentage / 100);
        }

        // Function to calculate Employer EPF
        function calculateEmployerEpf() {
            const basic = parseFloat(document.getElementById('basic').value) || 0;
            const maxEpfWages = parseFloat(document.getElementById('maxEpfWages').value) || 0;
            const employerEpfPercentage = 5.15; // Adjust percentage as needed

            return Math.min(basic, maxEpfWages) * (employerEpfPercentage / 100);
        }

        // Function to calculate Employer ESI
        function calculateEmployerEsi() {
            const grossSalary = parseFloat(document.getElementById('grossSalary').value) || 0;
            const maxEsiWages = parseFloat(document.getElementById('maxEsiWages').value) || 0;
            const employerEsiPercentage = 4.75; // Adjust percentage as needed

            return Math.min(grossSalary, maxEsiWages) * (employerEsiPercentage / 100);
        }

        // Attach the function to input change events
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => {
            input.addEventListener('input', calculateValues);
        });

        // Initial calculation
        calculateValues();
    </script>
</body>
</html>





